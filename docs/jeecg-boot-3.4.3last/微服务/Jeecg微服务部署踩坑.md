# Jeecg微服务部署踩坑

## 1. 正常按照 `Gateway网关高级配置3.4.md` 文档设置

## 2. 正常按照 `Gateway网关高级配置3.4.md` 文档设置

## 3. 前端微服务部署

**坑1：从前端代理到微服务网关后，访问不到流程设计器**

前端容器打包以前端根目录下的：`Dockerfile` 文件为准，具体解释一下几个变量的作用：

* `API_CONTEXT_PATH`：打包配置的api代理路径默认为 `/main`
* `API_PROXY_PASS`：接口代理地址，微服务状态下，指向网关，默认为 `http://172.17.0.1:9999/` ，注意结尾需要有 `/`
* `API_GATEWAY_PROXY_PATH`：客户端访问的实际接口路径，微服务状态下，默认为 `http://{服务器IP}:{访问端口}/main/` ，**这个配置会影响流程设计器的加载，务必设置正确**
* `SUPERMAP_PROXY_PASS`：超图代理地址，根据实际需求设置 ，注意结尾需要有 `/`

**坑2：从前端代理到微服务网关后，访问不到积木报表**

一、需要在后端的配置文件添加，下面配置然后重启：

```yaml
# main自定义路径名称
jeecg:  
  jmreport:
    customPrePath: /main
```

二、积木报表的菜单配置需要配置成绝对路径：`http://{服务器IP}:{访问端口}/main/`
