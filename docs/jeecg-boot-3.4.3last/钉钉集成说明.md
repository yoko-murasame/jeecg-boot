[返回](../)

# 钉钉集成说明

钉钉集成说明

https://www.kancloud.cn/zhangdaiscott/jeecg-boot/2292480

依赖包需要升级到最新版，旧版本有点问题（已更新）：

```xml
<dependency>
  <groupId>org.jeecgframework</groupId>
  <artifactId>jeewx-api</artifactId>
  <version>1.5.2</version>
</dependency>
```

1、系统自带了同步钉钉的功能，先在yaml中配置开启第三方APP对接功能。

```yaml
#第三方APP对接
third-app:
  enabled: true
  type:
    #钉钉
    DINGTALK:
      enabled: true
      # appKey
      client-id: ??
      # appSecret
      client-secret: ??
      agent-id: ??
```

2、部门同步组件，使用方式：将部门管理组件替换成：`system/DepartListSync`，然后点击同步钉钉到本地即可。

相关接口：`/sys/thirdApp/sync/dingtalk/depart/toLocal`

3、用户同步组件，在用户管理中可自动同步，点击同步钉钉到本地即可。Todo 这里用户同步过来，接入部门信息暂未测试，以后有空优化。

相关接口：`/sys/thirdApp/sync/dingtalk/user/toLocal`

4、扩展消息推送接口

扩展消息推送接口，需要推送第三方消息时需要额外添加request参数：`?THIRD_APP_TYPE=DINGTALK`，目前支持的类型有：

* `DINGTALK`：推送钉钉
* `WECHAT_ENTERPRISE`：推送微信企业
* `ALL`：都推送
